<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Monkeytwizzle Film Timer</title>
<link rel="stylesheet" href="animate.css">
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<style>
body {
	background-color: black;
	color: #FF0000;
	font-family: sans-serif;
	font-size: 12pt;
}
small {
	color: #DD0000;
}
input {
	background-color: black;
	color: #FF0000;
	border: 1px solid #FF0000;
}
input[type=checkbox] {
	background-color: black;
}
button {
	background-color: black;
	border: 1px solid #FF0000;
	color: #FF0000;
	padding: 2em;
}
button:hover {
	background-color: #440000;
	cursor: pointer;
}
#timings {
	width: 50%;
	margin-left: auto;
	margin-right: auto;
}
#timer {
	width: 50%;
	text-align: center;
	font-size: 72pt;
	margin-left: auto;
	margin-right: auto;
}
#timer {
	animation-iteration-count: infinite;
	-moz-animation-iteration-count: infinite;
    -webkit-animation-iteration-count: infinite;
}
</style>
</head>
<body>
<div id="timings">
	<h3>Film Development Timer<br /><small>(Based on 10 second agitation at the end of each minute)</small></h3>
	<span>How long to run for (minutes / seconds)</span><br />
	<input type="text" id="minutes" value="" size="4" /> / <input type="text" id="seconds" value="00" size="4" />
	<p />
	<div class="checkbox"><input type="checkbox" id="vibrate" /> Vibrate?</div>
	<div class="checkbox"><input type="checkbox" id="sound" /> Audio alarm?</div>
	<p />
	<button id="start" style="width:100%">Start</button>
</div>
</div>
<div id="timer" style="display:none">
	<span id="timetext"></span><br />
	<button id="restart" style="display:none">Restart</button>
</div>
<script>
function timerDecrement() {
    var currentMinutes = Math.floor(totalSecs / 60);
    var currentSeconds = totalSecs % 60;
    if(currentSeconds <= 9) currentSeconds = "0" + currentSeconds;
    if(currentMinutes <= 9) currentMinutes = "0" + currentMinutes;
    var offsetSecs = (originalSecs - totalSecs) % 60
    if (offsetSecs >= 50 && offsetSecs <= 59) {
    	$("#timer").addClass('animated shake');
    } else {
    	$("#timer").removeClass('animated shake');
    }
    totalSecs--;
    if(totalSecs >= 0) {
	    $("#timetext").text(currentMinutes + ":" + currentSeconds);
    	setTimeout('timerDecrement()',1000);
    } else {
	    $("#timetext").text("Finished");
    	$("#timer").addClass('animated flash');
    	$("#restart").fadeIn();
    }
}
totalSecs = 0;
originalSecs = 0;
$(document).ready(function() {
	$("#start").click(function() {
		$("#timings").hide();
		$("#timer").show();
	  	var mins = Number($("#minutes").val()) * 60;  //Set the number of minutes you need
	    var secs = Number($("#seconds").val());
	    totalSecs = mins + secs;	// add one as we call timerDecrement immediately so "lose" a second
	    originalSecs = totalSecs;
	    var currentSeconds = 0;
	    var currentMinutes = 0;
	    timerDecrement();
	    //setTimeout('timerDecrement()',1000);

	});
	$("#restart").click(function() {
		$("#timetext").removeClass('animated flash');
		$("#timer").fadeOut(function() {
			$("#timings").fadeIn();
		});
	});
});
</script>
</body>

</html> 